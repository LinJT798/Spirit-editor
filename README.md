# 精灵表切割工具

一个功能强大的精灵表（Sprite Sheet）切割工具，支持多种切割模式，类似Unity的Sprite Editor功能。

## 功能特点

### 切割模式
1. **按尺寸网格切割** - 指定单元格的像素尺寸进行切割
2. **按数量网格切割** - 指定行列数量均分图片
3. **自动检测切割** - 自动识别精灵边界，智能分离独立精灵
4. **手动框选切割** - 手动框选需要的精灵区域

### 其他功能
- 实时预览切割效果
- 支持去除透明边缘
- 批量导出精灵图片
- 生成JSON配置文件
- 图片缩放查看
- 支持多种图片格式（PNG、JPG、GIF、BMP等）

## 安装

### 依赖要求
- Python 3.7+
- Pillow (图像处理)
- OpenCV (图像分析)
- NumPy (数组操作)
- Tkinter (GUI界面，Python自带)

### 安装步骤

1. 克隆或下载项目
2. 运行安装脚本（会自动创建虚拟环境并安装依赖）：
```bash
chmod +x setup.sh run.sh  # 添加执行权限（首次需要）
./setup.sh                 # 运行安装脚本
```

或手动创建虚拟环境：
```bash
# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate   # Mac/Linux
# 或
venv\Scripts\activate      # Windows

# 安装依赖
pip install -r requirements.txt
```

## 使用方法

### 启动程序

#### 方法一：使用启动脚本（推荐）
```bash
./run.sh   # 自动激活虚拟环境并运行
```

#### 方法二：手动启动
```bash
# 1. 激活虚拟环境
source venv/bin/activate   # Mac/Linux
# 或
venv\Scripts\activate      # Windows

# 2. 运行程序
python main.py

# 3. 退出虚拟环境（使用完后）
deactivate
```

### 操作流程

1. **加载图片**
   - 点击"选择图片"按钮或使用菜单"文件 > 打开图片"
   - 选择要切割的精灵表图片

2. **选择切割模式**
   - **按尺寸网格切割**：设置单元格宽高、间距和偏移
   - **按数量网格切割**：设置行列数和间距
   - **自动检测切割**：设置最小精灵尺寸和透明度阈值
   - **手动框选切割**：在图片上拖动鼠标框选精灵

3. **执行切割**
   - 点击"执行切割"按钮
   - 查看切割预览

4. **导出精灵**
   - 选择是否去除透明边缘
   - 点击"导出精灵"按钮
   - 选择导出目录

### 导出内容
- 独立的精灵图片文件（PNG格式）
- sprites.json配置文件，包含：
  - 源图片信息
  - 每个精灵的位置和尺寸
  - 精灵文件名映射

## 参数说明

### 网格切割参数
- **单元格宽/高度**：每个精灵的像素尺寸
- **水平/垂直间距**：精灵之间的间隔像素
- **X/Y偏移**：从图片左上角的起始偏移

### 自动切割参数
- **最小精灵尺寸**：忽略小于此尺寸的区域
- **透明度阈值**：Alpha通道低于此值视为透明

## 文件结构
```
精灵表切割/
├── main.py              # 主程序入口
├── sprite_cutter.py     # 核心切割逻辑
├── gui.py              # GUI界面
├── requirements.txt    # 依赖包列表
└── README.md          # 说明文档
```

## 注意事项
- **必须在虚拟环境中运行**，避免与系统Python包冲突
- 建议使用PNG格式的精灵表以保留透明通道
- 自动切割适合精灵之间有明显间隔的图片
- 手动切割适合不规则排列的精灵表
- 导出前可预览切割效果，避免重复操作
- macOS用户如遇到权限问题，请使用 `chmod +x setup.sh run.sh` 添加执行权限

## 许可证
MIT License